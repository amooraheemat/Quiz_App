<!DOCTYPE html>
<html>

<head>
    <title>Quiz Results</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 min-h-screen p-6">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-center mb-8 text-blue-600">Quiz Results</h1>

        <!-- Score Summary -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6 text-center">
            <div
                class="text-6xl font-bold mb-4 <%= result.percentage >= 70 ? 'text-green-600' : result.percentage >= 50 ? 'text-yellow-600' : 'text-red-600' %>">
                <%= result.percentage %>%
            </div>
            <h2 class="text-2xl font-bold mb-2">
                <% if (result.percentage>= 70) { %>
                    Excellent Work! 
                    <% } else if (result.percentage>= 50) { %>
                        Good Job! 
                        <% } else { %>
                            Keep Practicing! 
                            <% } %>
            </h2>
            <p class="text-gray-600">You scored <%= result.score %> out of <%= result.total_questions %> questions
                        correctly</p>
        </div>

        <!-- User Info -->
        <div class="bg-blue-50 rounded-lg p-6 mb-6">
            <h3 class="text-lg font-semibold mb-4">Quiz Details</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <div><strong>Name:</strong>
                    <%= user.name %>
                </div>
                <div><strong>Email:</strong>
                    <%= user.email %>
                </div>
                <div><strong>Date:</strong>
                    <%= new Date(result.completed_at).toLocaleDateString() %>
                </div>
                <div><strong>Time:</strong>
                    <%= new Date(result.completed_at).toLocaleTimeString() %>
                </div>
            </div>
        </div>

        <!-- Question Results -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h3 class="text-lg font-semibold mb-4">Question by Question Results</h3>

            <% result.answers.forEach((answer, index)=> { %>
                <div
                    class="border-l-4 <%= answer.is_correct ? 'border-green-500 bg-green-50' : 'border-red-500 bg-red-50' %> p-4 mb-4 rounded-r">
                    <h4 class="font-medium mb-2">Question <%= index + 1 %>: <%= answer.question_text %>
                    </h4>
                    <p><strong>Your Answer:</strong>
                        <%= answer.user_answer ? answer.user_answer.toUpperCase() : 'Not answered' %>
                    </p>
                    <% if (!answer.is_correct) { %>
                        <p><strong>Correct Answer:</strong>
                            <%= answer.correct_answer.toUpperCase() %>
                        </p>
                        <% } %>
                            <p class="<%= answer.is_correct ? 'text-green-600' : 'text-red-600' %>">
                                <strong>
                                    <%= answer.is_correct ? '✓ Correct' : '✗ Wrong' %>
                                </strong>
                            </p>
                </div>
                <% }); %>
        </div>

        <!-- Actions -->
        <div class="text-center">
            <a href="/" class="bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 font-medium">
                Take Quiz Again
            </a>
        </div>
    </div>
</body>

</html>
